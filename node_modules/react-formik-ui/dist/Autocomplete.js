import e,{useState as t,memo as n}from"react";import r from"classnames";import{useFormikContext as a,useField as o,ErrorMessage as l}from"formik";import i from"lodash.omit";function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var m=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"input";return function(u){return n((function(n){var s=n.name,m=n.label,f=n.hint,d=n.placeholder,p=n.type,v=n.disabled,y=n.required,g=n.style,b=n.format,h=n.onFocus,E=n.onBlur,O=c(t(!1),2),w=O[0],A=O[1],N=c(o(s),2),j=N[0],S=N[1].error,k=p&&"hidden"===p,x="phoneInput"===a&&"NATIONAL"!==b,F=i(n,["hint","label","onFocus","onBlur","required"]),I=w||!!j.value||!!d||!(!v||!j.value);return e.createElement("div",{className:r("form-element",a,{hasError:!!S,hidden:k})},e.createElement("div",{className:r("".concat(a,"-wrapper"),{isDisabled:v})},m&&e.createElement("span",{className:r("label",{hide:I,moveLabel:x})},"".concat(m).concat(y?" *":"")),e.createElement(u,Object.assign({onAnimationStart:function(e){A("onAutoFillStart"===e.animationName)},onFocus:function(e){h&&h(e),A(!0)},onBlur:function(e){E&&E(e),j.onBlur(s),A(!1)},style:g},F))),e.createElement("span",{className:"error"},e.createElement(l,{name:s})),!!f&&e.createElement("span",{className:"hint"},f))}))}}("autocomplete")((function(n){var l=n.name,i=n.id,u=n.suggestions,m=n.className,f=n.style,d=s(n,["name","id","suggestions","className","style"]),p=c(o(l),1)[0].value,v=function(e,n){var r=a(),o=r.setFieldValue,l=r.setFieldTouched,i=c(t(0),2),u=i[0],s=i[1],m=c(t(null),2),f=m[0],d=m[1],p=c(t(!1),2),v=p[0],y=p[1];return[u,f,v,function(t){var r=t.currentTarget.value,a=null==n?void 0:n.filter((function(e){return e.toLowerCase().startsWith(r.toLowerCase())}));s(0),a&&d(a),y(!0),o(e,r),l(e,!0)},function(t){s(0),d(null),y(!1),o(e,t.currentTarget.innerText),l(e,!0)},function(t){if("Enter"===t.key&&f){var n;if(t.preventDefault(),""===(null==t||null===(n=t.currentTarget)||void 0===n?void 0:n.value))return;y(!1),o(e,f[u]),l(e,!0)}else if("ArrowUp"===t.key&&f){var r=f.length;s(0===u?r-1:u-1)}else if("ArrowDown"===t.key&&f){var a=f.length;s(u===a-1?0:u+1)}}]}(l,u),y=c(v,6),g=y[0],b=y[1],h=y[2],E=y[3],O=y[4],w=y[5];return e.createElement(e.Fragment,null,e.createElement("input",Object.assign({},d,{id:i||l,name:l,className:m,style:f,onChange:E,onKeyDown:w,value:p,type:"text",tabIndex:0})),h&&!!p&&e.createElement("ul",{className:"suggestions"},null==b?void 0:b.map((function(t,n){return e.createElement("li",{className:r({"suggestion-active":n===g}),key:t,onClick:O,role:"presentation"},t)}))))}));export{m as Autocomplete};
