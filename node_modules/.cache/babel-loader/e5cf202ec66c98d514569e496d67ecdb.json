{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"D:/ConHut/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{React,useState,useEffect}from'react';import{useHistory}from'react-router-dom';import Axios from'axios';import{CKEditor}from'@ckeditor/ckeditor5-react';import Editor from'ckeditor5-custom-build/build/ckeditor';import Modal from\"react-responsive-modal\";import Select from'react-select';// import NavBar \nimport NavBar from\"../../components/NavBar/NavBar\";import\"./EditablePage.css\";export default function EditablePage(){var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openDraft=_useState2[0],GotDraft=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),publishstatus=_useState4[0],GetPublishStatus=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),draftList=_useState6[0],GetDraftList=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),location=_useState8[0],SetLocation=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),title=_useState10[0],SetTitle=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),content=_useState12[0],SetContent=_useState12[1];var _useState13=useState('0'),_useState14=_slicedToArray(_useState13,2),timer=_useState14[0],SetTimer=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),Tag=_useState16[0],SetTag=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),modalStatus=_useState18[0],GetModalStatus=_useState18[1];var editorConfiguration={placeholder:\"Type your confession here...\",toolbar:[\"bold\",\"italic\",\"underline\"]};useEffect(function(){Axios.get(\"http://localhost:3001/getaccount\").then(function(result){if(result.data.loggedIn===true){Axios.get(\"http://localhost:3001/confession/getdraft\").then(function(response){if(response.data){GetDraftList(response.data);}});}else{history.push(\"/\");}});window.addEventListener('beforeunload',alertUser);return function(){window.removeEventListener('beforeunload',alertUser);};},[]);// remove the , [] later on \nvar alertUser=function alertUser(e){e.preventDefault();e.returnValue='';};var closemodal=function closemodal(){GetModalStatus(false);};var savetoDraft=function savetoDraft(){if(title===\"\"){GetPublishStatus(\"Add a title before saving to draft!\");GetModalStatus(true);}else{Axios.post(\"http://localhost:3001/updateconfession/draft\",{location:location,content:content,title:title}).then(function(response){if(response.data.message){GetPublishStatus(response.data.message);GetModalStatus(true);}});history.push(\"/home\");}};var publishConfession=function publishConfession(){var usertimer=0;var tagarray=[];if(timer.value!==undefined){usertimer=timer.value;}for(var i=0;i<Tag.length;i++){delete Tag[i].label;tagarray.push(Tag[i].value);}if(location===\"\"||content===\"\"||title===\"\"||usertimer===0||tagarray.length===0){GetPublishStatus(\"We cannot publish your confession while some of the field is empty!\");GetModalStatus(true);}else{console.log(\"publish\");Axios.post(\"http://localhost:3001/updateconfession/publish\",{location:location,content:content,title:title,timer:usertimer,tag:tagarray}).then(function(response){if(response.data.message){GetPublishStatus(response.data.message);GetModalStatus(true);}});history.push(\"/home\");}};var FindDraftID=function FindDraftID(conID){var currentID=\"\".concat(conID);GotDraft(true);Axios.post(\"http://localhost:3001/confession/store/id\",{confessID:currentID});Axios.post(\"http://localhost:3001/confession/getdraft/specific\",{confessID:currentID}).then(function(response){if(response.data){var array=Object.values(response.data[0]);console.log(array[4]);console.log(array);SetLocation(array[2]);SetTitle(array[3]);if(array[4]!==null){SetContent(array[4]);}}});};var TimerOption=[{value:'12',label:'Half Day'},{value:'24',label:'One Day'},{value:'48',label:'Two Days'},{value:'72',label:'Three Days'},{value:'0',label:'Permanent'}];var TagOption=[{value:'relationship',label:'Relationship'},{value:'thief',label:'Thief'},{value:'sabotage',label:'Sabotage'},{value:'karma',label:'Karma'},{value:'bday',label:'Birthday'},{value:'eventruin',label:'Event Ruiner'}];return/*#__PURE__*/_jsxs(\"div\",{className:\"DraftPage\",children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"draftContainer\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your draft\"}),openDraft===false&&/*#__PURE__*/_jsx(\"div\",{children:draftList.map(function(val){return/*#__PURE__*/_jsx(\"div\",{className:\"list-draft-box\",children:/*#__PURE__*/_jsx(\"div\",{className:\"clickable-box\",onClick:function onClick(){FindDraftID(val.confess_id);},children:val.confess_title})});})}),openDraft===true&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\" Title:\",/*#__PURE__*/_jsx(\"input\",{value:title,maxLength:\"250\",placeholder:\"Spice your confession!\",onChange:function onChange(e){SetTitle(e.target.value);}})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CKEditor,{editor:Editor,data:content,config:editorConfiguration,onChange:function onChange(event,editor){var data=editor.getData();SetContent(data);}})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\" Crime scene:\",/*#__PURE__*/_jsx(\"input\",{value:location,maxLength:\"150\",placeholder:\"Where did it take place?\",onChange:function onChange(event){SetLocation(event.target.value);}})]})}),/*#__PURE__*/_jsx(Select,{defaultValue:timer,onChange:SetTimer,options:TimerOption}),/*#__PURE__*/_jsx(Select,{defaultValue:Tag,onChange:SetTag,isMulti:true,options:TagOption}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){savetoDraft();},children:\"Save to Draft\"}),/*#__PURE__*/_jsx(\"button\",{onClick:publishConfession,children:\"Publish Confession\"}),modalStatus===true&&/*#__PURE__*/_jsx(Modal,{open:true,onClose:closemodal,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:publishstatus}),/*#__PURE__*/_jsx(\"button\",{onClick:closemodal,children:\"Close\"})]})})]})]})]});}","map":{"version":3,"sources":["D:/ConHut/frontend/src/pages/EditablePage/EditablePage.js"],"names":["React","useState","useEffect","useHistory","Axios","CKEditor","Editor","Modal","Select","NavBar","EditablePage","history","openDraft","GotDraft","publishstatus","GetPublishStatus","draftList","GetDraftList","location","SetLocation","title","SetTitle","content","SetContent","timer","SetTimer","Tag","SetTag","modalStatus","GetModalStatus","editorConfiguration","placeholder","toolbar","get","then","result","data","loggedIn","response","push","window","addEventListener","alertUser","removeEventListener","e","preventDefault","returnValue","closemodal","savetoDraft","post","message","publishConfession","usertimer","tagarray","value","undefined","i","length","label","console","log","tag","FindDraftID","conID","currentID","confessID","array","Object","values","TimerOption","TagOption","map","val","confess_id","confess_title","target","event","editor","getData"],"mappings":"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","sourcesContent":["import {React, useState, useEffect} from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Axios from 'axios';\r\n\r\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\r\nimport Editor from 'ckeditor5-custom-build/build/ckeditor';\r\n\r\nimport Modal from \"react-responsive-modal\";\r\nimport Select from 'react-select';\r\n\r\n// import NavBar \r\nimport NavBar from \"../../components/NavBar/NavBar\";\r\n\r\nimport \"./EditablePage.css\"\r\n\r\nexport default function EditablePage(){\r\n    const history = useHistory();\r\n\r\n    const [openDraft, GotDraft] = useState(false);\r\n    const [publishstatus, GetPublishStatus] = useState('');\r\n    const [draftList, GetDraftList] = useState([]);\r\n\r\n    const [location, SetLocation] = useState('');\r\n    const [title, SetTitle] = useState('');\r\n    const [content, SetContent] = useState('');\r\n    const [timer, SetTimer] = useState('0');\r\n    const [Tag, SetTag] = useState([]);\r\n    const [modalStatus, GetModalStatus] = useState(false);\r\n\r\n    const editorConfiguration = {\r\n        placeholder: \"Type your confession here...\",\r\n        toolbar: [\"bold\", \"italic\", \"underline\"]\r\n    }\r\n\r\n    useEffect(() => {\r\n        Axios.get(\"http://localhost:3001/getaccount\").then((result) => {\r\n            if (result.data.loggedIn === true) {\r\n                Axios.get(\"http://localhost:3001/confession/getdraft\").then((response) => {\r\n                    if (response.data) {\r\n                        GetDraftList(response.data)\r\n                    }\r\n                })\r\n            } else {\r\n                history.push(\"/\")\r\n            }\r\n        });\r\n        window.addEventListener('beforeunload', alertUser)\r\n        return () => {\r\n            window.removeEventListener('beforeunload', alertUser)\r\n        }\r\n    }, []); // remove the , [] later on \r\n\r\n    const alertUser = (e) => {\r\n        e.preventDefault();\r\n        e.returnValue = ''\r\n    }\r\n\r\n    const closemodal = () => {\r\n        GetModalStatus(false)\r\n    }\r\n\r\n    const savetoDraft = () => {\r\n        if (title === \"\") {\r\n            GetPublishStatus(\"Add a title before saving to draft!\")\r\n            GetModalStatus(true)\r\n        } else {\r\n            Axios.post(\"http://localhost:3001/updateconfession/draft\", {\r\n            location: location,\r\n            content: content,\r\n            title: title,\r\n            }).then((response) => {\r\n                if (response.data.message) {\r\n                    GetPublishStatus(response.data.message)\r\n                    GetModalStatus(true)\r\n                }\r\n            })\r\n            history.push(\"/home\")\r\n        }\r\n    }\r\n\r\n    const publishConfession = () => {\r\n        let usertimer = 0\r\n        var tagarray = []\r\n\r\n        if (timer.value !== undefined) {\r\n            usertimer = timer.value\r\n        }\r\n\r\n        for (var i = 0; i < Tag.length; i++) {\r\n            delete Tag[i].label\r\n            tagarray.push(Tag[i].value)\r\n        } \r\n\r\n        if (location === \"\" || content === \"\" || title === \"\" || usertimer === 0 || tagarray.length === 0) {\r\n            GetPublishStatus(\"We cannot publish your confession while some of the field is empty!\")\r\n            GetModalStatus(true)\r\n        } else {\r\n            console.log(\"publish\")\r\n            Axios.post(\"http://localhost:3001/updateconfession/publish\", {\r\n            location: location,\r\n            content: content,\r\n            title: title,\r\n            timer: usertimer,\r\n            tag: tagarray,\r\n            }).then((response) => {\r\n                if (response.data.message) {\r\n                    GetPublishStatus(response.data.message)\r\n                    GetModalStatus(true)\r\n                }\r\n            })\r\n            history.push(\"/home\")\r\n        }\r\n    }\r\n\r\n    const FindDraftID = (conID) => {\r\n        const currentID = `${conID}`\r\n        GotDraft(true)\r\n        Axios.post(\"http://localhost:3001/confession/store/id\", {\r\n            confessID: currentID\r\n        })\r\n\r\n        Axios.post(\"http://localhost:3001/confession/getdraft/specific\", {\r\n            confessID: currentID\r\n        }).then((response) => {\r\n            if (response.data) {\r\n                var array = Object.values(response.data[0])\r\n                console.log(array[4])\r\n                console.log(array)\r\n                SetLocation(array[2])\r\n                SetTitle(array[3])\r\n                if (array[4] !== null) {\r\n                    SetContent(array[4])\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    const TimerOption = [\r\n        {value: '12', label: 'Half Day'},\r\n        {value: '24', label: 'One Day'},\r\n        {value: '48', label: 'Two Days'},\r\n        {value: '72', label: 'Three Days'},\r\n        {value: '0', label: 'Permanent'},\r\n    ]\r\n\r\n    const TagOption = [\r\n        {value: 'relationship', label: 'Relationship'},\r\n        {value: 'thief', label: 'Thief'},\r\n        {value: 'sabotage', label: 'Sabotage'},\r\n        {value: 'karma', label: 'Karma'},\r\n        {value: 'bday', label: 'Birthday'},\r\n        {value: 'eventruin', label: 'Event Ruiner'},\r\n    ]\r\n\r\n    return (\r\n        <div className=\"DraftPage\">\r\n            <NavBar/>\r\n            <div className=\"draftContainer\">\r\n                 <h2>Your draft</h2>\r\n                    {openDraft === false && <div>\r\n                    {draftList.map((val) => {\r\n                        return (\r\n                            <div className=\"list-draft-box\">\r\n                                <div className=\"clickable-box\" onClick={() => {FindDraftID(val.confess_id)}}>\r\n                                    {val.confess_title}\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </div>}\r\n                {openDraft === true && <div>\r\n                    <div>\r\n                        <label> Title:\r\n                            <input \r\n                            value = {title}\r\n                            maxLength = \"250\"\r\n                            placeholder=\"Spice your confession!\"\r\n                            onChange={(e) => {\r\n                                SetTitle(e.target.value);\r\n                            }}\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                    <div>\r\n                        <CKEditor\r\n                            editor = { Editor }\r\n                            data = {content}\r\n                            config = {editorConfiguration}\r\n                            onChange = {(event, editor) => {\r\n                                const data = editor.getData()\r\n                                SetContent(data);\r\n                            }}                       \r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label> Crime scene:\r\n                            <input \r\n                            value = {location}\r\n                            maxLength = \"150\"\r\n                            placeholder=\"Where did it take place?\"\r\n                            onChange={(event) => {\r\n                                SetLocation(event.target.value);\r\n                            }}\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                    <Select\r\n                        defaultValue = {timer}\r\n                        onChange = {SetTimer}\r\n                        options = {TimerOption}/>\r\n                    <Select\r\n                        defaultValue = {Tag}\r\n                        onChange = {SetTag}\r\n                        isMulti\r\n                        options = {TagOption}/>\r\n                    <button onClick={() => {\r\n                        savetoDraft();\r\n                    }}>Save to Draft</button>\r\n                    <button onClick={publishConfession}>Publish Confession</button>\r\n                    {modalStatus === true && <Modal open={true} onClose={closemodal}>\r\n                        <div>\r\n                            <p>{publishstatus}</p>\r\n                            <button onClick={closemodal}>Close</button>\r\n                        </div>\r\n                    </Modal>}\r\n                </div>}\r\n            </div>\r\n           \r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}