{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\ConHut\\\\frontend\\\\src\\\\components\\\\CreateConfession\\\\CreateConfession.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport Axios from 'axios';\nimport { useHistory } from \"react-router-dom\";\nimport TagOption from '../../GlobalVar/TagOption';\nimport TimerOption from '../../GlobalVar/TimerOption';\nimport './CreateConfession.css'; // create confession\n\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\nimport Select from 'react-select';\nimport Editor from 'ckeditor5-custom-build/build/ckeditor';\nexport default function CreateConfession() {\n  _s();\n\n  const history = useHistory();\n  const [title, GetTitle] = useState('');\n  const [content, GetContent] = useState('');\n  const [location, GetLocation] = useState('');\n  const [timer, GetTimer] = useState('0');\n  const [Tag, GetTag] = useState([]);\n  const [publishSuc, SetPubSuc] = useState(false); // publish or save to draft success\n\n  const [PublishStatus, GetPublishStatus] = useState('');\n  const editorConfiguration = {\n    placeholder: \"Type your confession here...\",\n    toolbar: [\"bold\", \"italic\", \"underline\"]\n  };\n\n  const postConfession = draft => {\n    let usertimer = 0;\n    var tagarray = [];\n\n    if (draft === 0) {\n      if (timer.value !== undefined) {\n        usertimer = timer.value;\n      }\n\n      for (var i = 0; i < Tag.length; i++) {\n        delete Tag[i].label;\n        tagarray.push(Tag[i].value);\n      }\n\n      if (location === \"\" || content === \"\" || title === \"\" || usertimer === 0 || tagarray.length === 0) {\n        GetPublishStatus(\"We cannot publish your confession while some of the field is empty!\");\n        return;\n      }\n    } else if (draft === 1) {\n      if (title === \"\") {\n        GetPublishStatus(\"Add a title before saving to draft!\");\n        return;\n      }\n    }\n\n    Axios.post(\"http://localhost:3001/confession/create\", {\n      location: location,\n      content: content,\n      title: title,\n      timer: usertimer,\n      tag: tagarray,\n      draft: draft\n    }).then(response => {\n      console.log(response.data.message);\n      GetPublishStatus(response.data.message);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"createConfession\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"label\",\n          children: [\" Title:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"TitleField\",\n            maxLength: \"250\",\n            placeholder: \"Spice your confession!\",\n            onChange: e => {\n              GetTitle(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"block1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(CKEditor, {\n          editor: Editor,\n          data: content,\n          config: editorConfiguration,\n          onChange: (event, editor) => {\n            const data = editor.getData();\n            GetContent(data);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"block1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"label\",\n          children: [\" Crime scene:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"LocationField\",\n            maxLength: \"150\",\n            placeholder: \"Where did it take place?\",\n            onChange: event => {\n              GetLocation(event.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"block1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Select, {\n        className: \"SelectField\",\n        defaultValue: timer,\n        onChange: GetTimer,\n        options: TimerOption\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"block2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Select, {\n        className: \"SelectField\",\n        defaultValue: Tag,\n        onChange: GetTag,\n        isMulti: true,\n        options: TagOption\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"block1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"DraftBtn\",\n          onClick: () => {\n            postConfession(1);\n          },\n          children: \"Save to Draft\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"PublishBtn\",\n          onClick: () => {\n            postConfession(0);\n          },\n          children: \"Publish\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: PublishStatus\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CreateConfession, \"CoxAV1s3lvxf0OUMvEIAmBrGj8I=\", false, function () {\n  return [useHistory];\n});\n\n_c = CreateConfession;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateConfession\");","map":{"version":3,"sources":["D:/ConHut/frontend/src/components/CreateConfession/CreateConfession.js"],"names":["React","useState","Axios","useHistory","TagOption","TimerOption","CKEditor","Select","Editor","CreateConfession","history","title","GetTitle","content","GetContent","location","GetLocation","timer","GetTimer","Tag","GetTag","publishSuc","SetPubSuc","PublishStatus","GetPublishStatus","editorConfiguration","placeholder","toolbar","postConfession","draft","usertimer","tagarray","value","undefined","i","length","label","push","post","tag","then","response","console","log","data","message","e","target","event","editor","getData"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport Axios from 'axios';\r\nimport { useHistory } from \"react-router-dom\"\r\n\r\nimport TagOption from '../../GlobalVar/TagOption';\r\nimport TimerOption from '../../GlobalVar/TimerOption';\r\nimport './CreateConfession.css'\r\n\r\n// create confession\r\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\r\nimport Select from 'react-select';\r\nimport Editor from 'ckeditor5-custom-build/build/ckeditor';\r\n\r\nexport default function CreateConfession() {\r\n    const history = useHistory();\r\n\r\n    const [title, GetTitle] = useState('')\r\n    const [content, GetContent] = useState('')\r\n    const [location, GetLocation] = useState('')\r\n    const [timer, GetTimer] = useState('0')\r\n    const [Tag, GetTag] = useState([])\r\n\r\n    const [publishSuc, SetPubSuc] = useState(false) // publish or save to draft success\r\n    const [PublishStatus, GetPublishStatus] = useState('')\r\n\r\n    const editorConfiguration = {\r\n        placeholder: \"Type your confession here...\",\r\n        toolbar: [\"bold\", \"italic\", \"underline\"]\r\n    }\r\n\r\n    const postConfession = (draft) => {\r\n        let usertimer = 0\r\n        var tagarray = []\r\n        if (draft === 0) {\r\n            if (timer.value !== undefined) {\r\n                usertimer = timer.value\r\n            }\r\n\r\n            for (var i = 0; i < Tag.length; i++) {\r\n                delete Tag[i].label\r\n                tagarray.push(Tag[i].value)\r\n            } \r\n\r\n            if (location === \"\" || content === \"\" || title === \"\" || usertimer === 0 || tagarray.length === 0) {\r\n                GetPublishStatus(\"We cannot publish your confession while some of the field is empty!\")\r\n                return\r\n            } \r\n\r\n        } else if (draft === 1) {\r\n            if (title === \"\") {\r\n                GetPublishStatus(\"Add a title before saving to draft!\")\r\n                return\r\n            }\r\n        } \r\n\r\n        Axios.post(\"http://localhost:3001/confession/create\", {\r\n            location: location,\r\n            content: content,\r\n            title: title,\r\n            timer: usertimer,\r\n            tag: tagarray,\r\n            draft: draft,\r\n        }).then((response) => {\r\n            console.log(response.data.message)\r\n            GetPublishStatus(response.data.message)\r\n            \r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"createConfession\">\r\n            <div>\r\n                <div>\r\n                    <label className=\"label\"> Title:\r\n                        <input \r\n                        className = \"TitleField\"\r\n                        maxLength = \"250\"\r\n                        placeholder=\"Spice your confession!\"\r\n                        onChange={(e) => {\r\n                            GetTitle(e.target.value);\r\n                        }}\r\n                        />\r\n                    </label>\r\n                </div>\r\n            <div className=\"block1\"></div>\r\n            <div>\r\n                <CKEditor\r\n                    editor = { Editor }\r\n                    data = {content}\r\n                    config = {editorConfiguration}\r\n                    onChange = {(event, editor) => {\r\n                        const data = editor.getData()\r\n                        GetContent(data);\r\n                    }}                       \r\n                />\r\n            </div>\r\n            <div className=\"block1\"></div>\r\n            <div>\r\n                <label className=\"label\"> Crime scene:\r\n                    <input\r\n                    className = \"LocationField\" \r\n                    maxLength = \"150\"\r\n                    placeholder=\"Where did it take place?\"\r\n                    onChange={(event) => {\r\n                        GetLocation(event.target.value);\r\n                    }}\r\n                    />\r\n                </label>\r\n            </div>\r\n            <div className=\"block1\"></div>\r\n            <Select\r\n                className = \"SelectField\"\r\n                defaultValue = {timer}\r\n                onChange = {GetTimer}\r\n                options = {TimerOption}/>\r\n            <div className=\"block2\"></div>\r\n            <Select\r\n                className = \"SelectField\"\r\n                defaultValue = {Tag}\r\n                onChange = {GetTag}\r\n                isMulti\r\n                options = {TagOption}/>\r\n            <div className=\"block1\"></div>\r\n            <div className=\"buttons\">\r\n                <button className=\"DraftBtn\" onClick={() => {postConfession(1)}}>Save to Draft</button>\r\n                <button className=\"PublishBtn\" onClick={() => {postConfession(0)}}>Publish</button>\r\n            </div>\r\n            <p>{PublishStatus}</p>\r\n        </div>\r\n    </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}