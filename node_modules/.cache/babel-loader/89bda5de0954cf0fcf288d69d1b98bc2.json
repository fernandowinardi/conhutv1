{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\ConHut\\\\frontend\\\\src\\\\components\\\\CreateConfession\\\\CreateConfession.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Axios from 'axios';\nimport { useHistory } from \"react-router-dom\";\nimport TagOption from '../../GlobalVar/TagOption';\nimport TimerOption from '../../GlobalVar/TimerOption';\nimport './CreateConfession.css'; // create confession\n\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\nimport Select from 'react-select';\nimport Editor from 'ckeditor5-custom-build/build/ckeditor';\nexport default function CreateConfession() {\n  _s();\n\n  const history = useHistory();\n  const [title, GetTitle] = useState('');\n  const [content, GetContent] = useState('');\n  const [location, GetLocation] = useState('');\n  const [timer, GetTimer] = useState('0');\n  const [Tag, GetTag] = useState([]);\n  const [TagOption, GetTagOption] = useState([]);\n  const [publishSuc, SetPubSuc] = useState(false); // publish or save to draft success\n\n  const [PublishStatus, GetPublishStatus] = useState('');\n  const editorConfiguration = {\n    placeholder: \"Type your confession here...\",\n    toolbar: [\"bold\", \"italic\", \"underline\"]\n  };\n\n  const postConfession = draft => {\n    let usertimer = 0;\n    var tagarray = [];\n\n    if (draft === 0) {\n      if (timer.value !== undefined) {\n        usertimer = timer.value;\n      }\n\n      for (var i = 0; i < Tag.length; i++) {\n        delete Tag[i].label;\n        tagarray.push(Tag[i].value);\n      }\n\n      if (location === \"\" || content === \"\" || title === \"\" || usertimer === 0 || tagarray.length === 0) {\n        GetPublishStatus(\"We cannot publish your confession while some of the field is empty!\");\n        return;\n      }\n    } else if (draft === 1) {\n      if (title === \"\") {\n        GetPublishStatus(\"Add a title before saving to draft!\");\n        return;\n      }\n    }\n\n    Axios.post(\"http://localhost:3001/confession/create\", {\n      location: location,\n      content: content,\n      title: title,\n      timer: usertimer,\n      tag: tagarray,\n      draft: draft\n    }).then(response => {\n      GetPublishStatus(response.data.message);\n      SetPubSuc(true);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"createConfession\",\n    children: [publishSuc === true && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: PublishStatus\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 37\n    }, this), publishSuc === false && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"label\",\n          children: [\" Title:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"TitleField\",\n            maxLength: \"250\",\n            placeholder: \"Spice your confession!\",\n            onChange: e => {\n              GetTitle(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"block1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(CKEditor, {\n          editor: Editor,\n          data: content,\n          config: editorConfiguration,\n          onChange: (event, editor) => {\n            const data = editor.getData();\n            GetContent(data);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"block1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"label\",\n          children: [\" Crime scene:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"LocationField\",\n            maxLength: \"150\",\n            placeholder: \"Where did it take place?\",\n            onChange: event => {\n              GetLocation(event.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"block1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Select, {\n        className: \"SelectField\",\n        defaultValue: timer,\n        onChange: GetTimer,\n        options: TimerOption\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"block2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Select, {\n        className: \"SelectField\",\n        defaultValue: Tag,\n        onChange: GetTag,\n        isMulti: true,\n        options: TagOption\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"block1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"DraftBtn\",\n          onClick: () => {\n            postConfession(1);\n          },\n          children: \"Save to Draft\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"PublishBtn\",\n          onClick: () => {\n            postConfession(0);\n          },\n          children: \"Publish\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: PublishStatus\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 38\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CreateConfession, \"U8adecLp+ZzwsvY9JswCioV3vIQ=\", false, function () {\n  return [useHistory];\n});\n\n_c = CreateConfession;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateConfession\");","map":{"version":3,"sources":["D:/ConHut/frontend/src/components/CreateConfession/CreateConfession.js"],"names":["React","useState","useEffect","Axios","useHistory","TagOption","TimerOption","CKEditor","Select","Editor","CreateConfession","history","title","GetTitle","content","GetContent","location","GetLocation","timer","GetTimer","Tag","GetTag","GetTagOption","publishSuc","SetPubSuc","PublishStatus","GetPublishStatus","editorConfiguration","placeholder","toolbar","postConfession","draft","usertimer","tagarray","value","undefined","i","length","label","push","post","tag","then","response","data","message","e","target","event","editor","getData"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport Axios from 'axios';\r\nimport { useHistory } from \"react-router-dom\"\r\n\r\nimport TagOption from '../../GlobalVar/TagOption';\r\nimport TimerOption from '../../GlobalVar/TimerOption';\r\nimport './CreateConfession.css'\r\n\r\n// create confession\r\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\r\nimport Select from 'react-select';\r\nimport Editor from 'ckeditor5-custom-build/build/ckeditor';\r\n\r\nexport default function CreateConfession() {\r\n    const history = useHistory();\r\n\r\n    const [title, GetTitle] = useState('')\r\n    const [content, GetContent] = useState('')\r\n    const [location, GetLocation] = useState('')\r\n    const [timer, GetTimer] = useState('0')\r\n    const [Tag, GetTag] = useState([])\r\n    const [TagOption, GetTagOption] = useState([])\r\n\r\n    const [publishSuc, SetPubSuc] = useState(false) // publish or save to draft success\r\n    const [PublishStatus, GetPublishStatus] = useState('')\r\n\r\n    const editorConfiguration = {\r\n        placeholder: \"Type your confession here...\",\r\n        toolbar: [\"bold\", \"italic\", \"underline\"]\r\n    }\r\n\r\n    const postConfession = (draft) => {\r\n        let usertimer = 0\r\n        var tagarray = []\r\n        if (draft === 0) {\r\n            if (timer.value !== undefined) {\r\n                usertimer = timer.value\r\n            }\r\n\r\n            for (var i = 0; i < Tag.length; i++) {\r\n                delete Tag[i].label\r\n                tagarray.push(Tag[i].value)\r\n            } \r\n\r\n            if (location === \"\" || content === \"\" || title === \"\" || usertimer === 0 || tagarray.length === 0) {\r\n                GetPublishStatus(\"We cannot publish your confession while some of the field is empty!\")\r\n                return\r\n            } \r\n\r\n        } else if (draft === 1) {\r\n            if (title === \"\") {\r\n                GetPublishStatus(\"Add a title before saving to draft!\")\r\n                return\r\n            }\r\n        } \r\n\r\n        Axios.post(\"http://localhost:3001/confession/create\", {\r\n            location: location,\r\n            content: content,\r\n            title: title,\r\n            timer: usertimer,\r\n            tag: tagarray,\r\n            draft: draft,\r\n        }).then((response) => {\r\n            GetPublishStatus(response.data.message)\r\n            SetPubSuc(true)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"createConfession\">\r\n            {publishSuc === true && <div>\r\n                <p>{PublishStatus}</p>\r\n            </div>}\r\n            {publishSuc === false && <div>\r\n                <div>\r\n                    <label className=\"label\"> Title:\r\n                        <input \r\n                        className = \"TitleField\"\r\n                        maxLength = \"250\"\r\n                        placeholder=\"Spice your confession!\"\r\n                        onChange={(e) => {\r\n                            GetTitle(e.target.value);\r\n                        }}\r\n                        />\r\n                    </label>\r\n                </div>\r\n            <div className=\"block1\"></div>\r\n            <div>\r\n                <CKEditor\r\n                    editor = { Editor }\r\n                    data = {content}\r\n                    config = {editorConfiguration}\r\n                    onChange = {(event, editor) => {\r\n                        const data = editor.getData()\r\n                        GetContent(data);\r\n                    }}                       \r\n                />\r\n            </div>\r\n            <div className=\"block1\"></div>\r\n            <div>\r\n                <label className=\"label\"> Crime scene:\r\n                    <input\r\n                    className = \"LocationField\" \r\n                    maxLength = \"150\"\r\n                    placeholder=\"Where did it take place?\"\r\n                    onChange={(event) => {\r\n                        GetLocation(event.target.value);\r\n                    }}\r\n                    />\r\n                </label>\r\n            </div>\r\n            <div className=\"block1\"></div>\r\n            <Select\r\n                className = \"SelectField\"\r\n                defaultValue = {timer}\r\n                onChange = {GetTimer}\r\n                options = {TimerOption}/>\r\n            <div className=\"block2\"></div>\r\n            <Select\r\n                className = \"SelectField\"\r\n                defaultValue = {Tag}\r\n                onChange = {GetTag}\r\n                isMulti\r\n                options = {TagOption}/>\r\n            <div className=\"block1\"></div>\r\n            <div className=\"buttons\">\r\n                <button className=\"DraftBtn\" onClick={() => {postConfession(1)}}>Save to Draft</button>\r\n                <button className=\"PublishBtn\" onClick={() => {postConfession(0)}}>Publish</button>\r\n            </div>\r\n            <p>{PublishStatus}</p>\r\n        </div>}\r\n    </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}